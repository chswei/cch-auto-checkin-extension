# 彰基自動打卡Chrome擴充功能

## 功能特色
- 🗓️ 統一日曆介面：單一日曆搭配模式切換，選擇值班日（值）、請假日（假）和加班日（加）
- 🎛️ 智能模式切換：點擊模式按鈕切換當前操作模式，介面更簡潔直觀
- 📋 視覺狀態指示：日期格顯示文字標記和顏色區分，一目了然
- ⏱️ 延長工時計算：自動計算延長總工時（值班日3小時/次，加班日2小時/次）
- 🤖 一鍵自動打卡：按順序自動填寫所有工作日的打卡記錄
- ⏰ 智慧班別判斷：自動識別平日、週六、值班、加班的不同班別
- 🚫 智慧跳過邏輯：自動跳過值班隔日、請假日等不需打卡的日期
- ✨ 自動對話框處理：無需手動確認，系統自動處理所有確認對話框
- 🕐 彈性加班時間：加班日自動調整簽退時間至20:00
- 🔒 嚴格加班限制：加班日僅限平日，且值班隔天絕對無法選擇

## 安裝步驟

### 1. 載入擴充功能
1. 開啟 Chrome 瀏覽器
2. 導航到 `chrome://extensions/`
3. 開啟右上角的「開發者模式」
4. 點擊「載入未封裝項目」
5. 選擇 `auto-checkin-extension` 資料夾
6. 擴充功能將會出現在擴充功能列表中

## 使用方法

### 1. 登入彰基EIP系統
- 手動登入 https://dpt.cch.org.tw/EIP/#/Login
- 導航到打卡頁面：頁面左上 Menu → 住院醫師排班資訊 → 打卡補登作業

### 2. 使用擴充功能
1. 確保您在正確的打卡頁面上
2. 點擊 Chrome 工具列上的擴充功能圖示
3. 使用月份切換按鈕選擇要處理的月份
4. 點擊**值班**按鈕，然後在日曆上點擊值班日（顯示藍色背景和「值」字）
5. 點擊**請假**按鈕，然後在日曆上點擊請假日（顯示紅色背景和「假」字）
6. 點擊**加班**按鈕，然後在日曆上點擊加班日（顯示橙色背景和「加」字，僅限週一到週五）
7. 系統會自動顯示不可選的日期（如週末的加班、值班隔天的加班）
8. 檢視延長工時總計（值班日3小時/次，加班日2小時/次）
9. 點擊「開始自動打卡」按鈕
9. 系統會自動處理所有確認對話框，無需手動點擊

## 排班邏輯說明

### 班別自動判斷
- **一般平日**：使用 C02班別（08:00-17:30）
- **加班平日**：使用 C02班別（08:00-20:00）
- **一般週六**：使用 W02班別（08:00-12:00）  
- **平日值班**：使用 DW2班別（08:00-隔日12:00）
- **週日值班**：使用 DW6班別（08:00-隔日12:00）

### 自動跳過的情況
- **值班隔日**：值班日的隔天自動跳過
- **請假日**：手動選擇的請假日跳過
- **週日值班前週六**：如果週日值班，前一天週六跳過

### 加班日特殊邏輯
- **選擇限制**：僅允許選擇週一到週五作為加班日，週末會自動禁用
- **值班限制**：值班日的隔天無法選擇為加班日，系統會自動禁用並提示
- **互斥選擇**：同一天不能同時是值班日、請假日和加班日
- **自動清理**：選擇值班日時，如隔天已設為加班日會自動清除
- **視覺提示**：不可選的加班日會顯示為半透明，並提供hover說明
- **時間調整**：加班日自動將C02班別的簽退時間從17:30調整為20:00
- **系統相容**：仍使用醫院系統的C02班別選項，確保完全兼容

## 技術架構
```
auto-checkin-extension/
├── manifest.json       # Chrome擴充功能設定檔
├── popup.html          # 彈出視窗使用者介面
├── popup.css           # 介面樣式
├── popup.js            # 介面邏輯和事件處理
├── utils.js            # 日期計算和排班規則工具
├── content.js          # 網頁DOM操作自動化腳本
└── dialog-override.js  # 對話框自動處理腳本
```

## 免責聲明
此工具僅用於簡化重複性作業，使用者應：
- 自行承擔使用風險
- 確認生成的排班表正確性
- 遵守醫院相關規定